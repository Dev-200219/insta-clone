(this["webpackJsonpinsta-clone"]=this["webpackJsonpinsta-clone"]||[]).push([[0],{107:function(e,t,c){},115:function(e){e.exports=JSON.parse('{"apiKey":"AIzaSyCZwPsQDJq0OrqyNVcOMrwH9WTDQdRuegg","authDomain":"insta-clone-8bfe4.firebaseapp.com","projectId":"insta-clone-8bfe4","storageBucket":"insta-clone-8bfe4.appspot.com","messagingSenderId":"57726792772","appId":"1:57726792772:web:ab0c1260b05ba4261d7811"}')},149:function(e,t,c){},151:function(e,t,c){},152:function(e,t,c){},153:function(e,t,c){},154:function(e,t,c){},155:function(e,t,c){},156:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c(26),s=c.n(a),i=c(0),o=c.n(i),l=c(2),r=c(17),j=c(115),d=c(65);c(141),c(158),c(157);d.a.initializeApp(j);var u=new d.a.auth.GoogleAuthProvider,b=d.a.auth(),O=d.a.firestore(),p=d.a.storage(),m=function(){b.signInWithPopup(u)},x=(d.a,c(4)),h=Object(n.createContext)(),f=function(e){var t=Object(n.useState)(null),c=Object(r.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(!0),j=Object(r.a)(i,2),d=j[0],u=j[1];return Object(n.useEffect)((function(){var e=b.onAuthStateChanged(function(){var e=Object(l.a)(o.a.mark((function e(t){var c,n,a,i,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return c=t.uid,n=t.displayName,a=t.email,i=t.photoURL,l=O.collection("users").doc(c),e.next=5,l.get();case 5:e.sent.exists||l.set({uid:c,displayName:n,photoURL:i,bio:""}),s({displayName:n,uid:c,email:a,photoURL:i,bio:""}),e.next=11;break;case 10:s(null);case 11:u(!1);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return function(){e()}}),[]),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(h.Provider,{value:a,children:!d&&e.children})})},g=c(191),v=c(200),y=c(193),N=c(195),k=c(188),w=(c(107),c(21)),C=c(83),S=c.n(C),_=c(84),R=c.n(_),D=c(202),L=c(204),M=c(194),T=c(203),U=Object(k.a)({root:{margin:"15px",width:"16rem"},other_login:{margin:"10px"},sign_up_btn:{margin:"10px"}}),B=function(){var e=Object(n.useState)(""),t=Object(r.a)(e,2),c=t[0],a=t[1],s=Object(n.useState)(""),i=Object(r.a)(s,2),o=i[0],l=i[1],j=Object(n.useState)(!1),d=Object(r.a)(j,2),u=d[0],O=d[1],p=Object(n.useContext)(h),f=Object(w.g)(),k=U();return Object(x.jsx)(x.Fragment,{children:p?Object(x.jsx)(w.a,{to:"/"}):Object(x.jsx)(g.a,{className:"sign-up-box-container",children:Object(x.jsxs)("div",{className:"sign-up-box",children:[Object(x.jsx)("div",{className:"display-img-container",children:Object(x.jsx)("img",{src:"https://images.unsplash.com/photo-1586191582151-f73872dfd183?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxjb2xsZWN0aW9uLXBhZ2V8M3wxNzA4Mjc2fHxlbnwwfHx8fA%3D%3D&w=1000&q=80",alt:""})}),Object(x.jsxs)("form",{children:[Object(x.jsx)(v.a,{id:"outlined-adornment-weight",value:c,onChange:function(e){a(e.currentTarget.value)},labelWidth:0,className:k.root,label:"Email",color:"black",variant:"outlined"}),Object(x.jsxs)(y.a,{variant:"outlined",children:[Object(x.jsx)(T.a,{htmlFor:"outlined-adornment-password",children:"Password"}),Object(x.jsx)(D.a,{id:"outlined-adornment-password",type:u?"text":"password",value:o,onChange:function(e){l(e.currentTarget.value)},endAdornment:Object(x.jsx)(L.a,{position:"end",children:Object(x.jsx)(M.a,{"aria-label":"toggle password visibility",onClick:function(){O(!u)},onMouseDown:function(e){e.preventDefault()},edge:"end",children:u?Object(x.jsx)(S.a,{}):Object(x.jsx)(R.a,{})})}),labelWidth:70})]}),Object(x.jsx)(N.a,{onClick:function(){b.signInWithEmailAndPassword(c,o).catch((function(e){var t=e.message;"auth/wrong-password"===t?alert("Wrong Password!!!"):"auth/user-not-found"===t?alert("User does not exist"):alert(t)}))},className:k.sign_up_btn,variant:"contained",color:"secondary",children:"Log In"}),Object(x.jsx)(N.a,{onClick:function(){f.push("/sign-up1")},className:k.sign_up_btn,variant:"contained",color:"secondary",children:"Sign Up"}),Object(x.jsx)("div",{className:k.other_login,children:Object(x.jsx)(N.a,{onClick:function(){m()},children:Object(x.jsx)("img",{src:"http://localhost:3000/icons/google-icon.svg",alt:"google_icon"})})})]})]})})})},F=Object(k.a)({root:{marginBottom:"15px",width:"16rem"},other_login:{margin:"10px"},sign_up_btn:{margin:"10px"}}),A=function(){var e=F(),t=Object(n.useState)(""),c=Object(r.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(""),o=Object(r.a)(i,2),l=o[0],j=o[1],d=Object(n.useState)(""),u=Object(r.a)(d,2),O=u[0],p=u[1],f=Object(n.useState)(!1),v=Object(r.a)(f,2),k=v[0],C=v[1],_=Object(n.useState)(!1),U=Object(r.a)(_,2),B=U[0],A=U[1],W=Object(n.useContext)(h),E=Object(w.g)(),H=function(e){e.preventDefault()};return Object(x.jsx)(x.Fragment,{children:W?Object(x.jsx)(w.a,{to:"/"}):Object(x.jsx)(g.a,{className:"sign-up-box-container",children:Object(x.jsxs)("div",{className:"sign-up-box",children:[Object(x.jsx)("div",{className:"display-img-container",children:Object(x.jsx)("img",{src:"https://images.unsplash.com/photo-1586191582151-f73872dfd183?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxjb2xsZWN0aW9uLXBhZ2V8M3wxNzA4Mjc2fHxlbnwwfHx8fA%3D%3D&w=1000&q=80",alt:""})}),Object(x.jsxs)("form",{color:"primary",children:[Object(x.jsxs)(y.a,{variant:"outlined",children:[Object(x.jsx)(T.a,{htmlFor:"outlined-adornment-password",children:"Email"}),Object(x.jsx)(D.a,{className:e.root,value:a,onChange:function(e){s(e.currentTarget.value)},labelWidth:40})]}),Object(x.jsxs)(y.a,{variant:"outlined",children:[Object(x.jsx)(T.a,{htmlFor:"outlined-adornment-password",children:"Password"}),Object(x.jsx)(D.a,{className:e.root,id:"outlined-adornment-password",type:k?"text":"password",value:l,onChange:function(e){j(e.currentTarget.value)},endAdornment:Object(x.jsx)(L.a,{position:"end",children:Object(x.jsx)(M.a,{"aria-label":"toggle password visibility",onClick:function(){C(!k)},onMouseDown:H,edge:"end",children:k?Object(x.jsx)(S.a,{}):Object(x.jsx)(R.a,{})})}),labelWidth:70})]}),Object(x.jsxs)(y.a,{variant:"outlined",children:[Object(x.jsx)(T.a,{htmlFor:"outlined-adornment-password",children:"Confirm Password"}),Object(x.jsx)(D.a,{id:"outlined-adornment-password",type:B?"text":"password",value:O,onChange:function(e){p(e.currentTarget.value)},endAdornment:Object(x.jsx)(L.a,{position:"end",children:Object(x.jsx)(M.a,{"aria-label":"toggle password visibility",onClick:function(){A(!B)},onMouseDown:H,edge:"end",children:B?Object(x.jsx)(S.a,{}):Object(x.jsx)(R.a,{})})}),labelWidth:132})]}),Object(x.jsx)(N.a,{onClick:function(){var e;""!==a&&""!==l&&l===O&&(b.createUserWithEmailAndPassword(a,l).catch((function(t){e=t,alert(t.message)})),setTimeout((function(){e||E.push("/sign-up2")}),1e3))},className:e.sign_up_btn,variant:"contained",color:"secondary",children:"Sign Up"}),Object(x.jsx)(N.a,{onClick:function(){E.push("/login")},className:e.sign_up_btn,variant:"contained",color:"secondary",children:"Log In"}),Object(x.jsx)("div",{className:e.other_login,children:Object(x.jsx)(N.a,{onClick:function(){m().catch((function(e){alert(e.message)}))},children:Object(x.jsx)("img",{src:"http://localhost:3000/icons/google-icon.svg",alt:"google_icon"})})})]})]})})})},W=c(127),E=c(98),H=c(198),I=c(199),P=c(101),z=c.n(P),Z=c(29),q=(c(149),c(100)),V=c.n(q),G=c(99),J=c.n(G),K=c(74),X=c.n(K),Q=c(201),Y=(c(114),c(103)),$=Object(k.a)((function(e){return{root:{"& > *":{marginTop:e.spacing(2)},borderRadius:"5px",position:"absolute",top:"440px",left:"0px"}}})),ee=function(e){var t=Object(n.useContext)(h),c=Object(n.useState)(""),a=Object(r.a)(c,2),s=a[0],i=a[1],o=Object(n.useState)(""),l=Object(r.a)(o,2),j=l[0],d=l[1],u=Object(n.useState)(1),b=Object(r.a)(u,2),p=b[0],m=b[1],f=Object(n.useState)(""),g=Object(r.a)(f,2),v=g[0],y=g[1],N=Object(n.useState)(!1),k=Object(r.a)(N,2),w=k[0],C=k[1],S=e.data.likes.includes(t.uid),_=e.data,R=_.comments,D=$(),L=4*(p-1),M=Math.min(R.length,4*p),T=Object(n.useRef)(null),U=function(){T.current.style="display:none"};return Object(n.useEffect)((function(){O.collection("users").doc(t.uid).get().then((function(e){i(e.data().displayName),d(e.data().photoURL)}))}),[t.uid]),Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"video-card-container",children:[Object(x.jsx)("div",{className:"data-container",children:"image"===_.type?Object(x.jsx)("img",{src:_.url,alt:"post_img"}):Object(x.jsx)("video",{controls:!0,src:_.url})}),Object(x.jsx)("div",{className:"vl"}),Object(x.jsxs)("div",{className:"like-comment-container",children:[Object(x.jsxs)("div",{className:"user-info",children:[Object(x.jsx)("div",{className:"user-img",children:_.dp?Object(x.jsx)("img",{src:_.dp,alt:""}):Object(x.jsx)("img",{src:"https://i.stack.imgur.com/l60Hf.png",alt:"some_dp"})}),Object(x.jsx)("p",{className:"user-name",children:_.name})]}),Object(x.jsxs)("div",{className:"add-comment",children:[Object(x.jsx)("input",{onChange:function(e){y(e.currentTarget.value)},value:v,placeholder:"Comment...",onKeyDown:function(e){if("Enter"===e.key){var t=[].concat(Object(Z.a)(_.comments),[{name:s,dp:j,value:v}]);O.collection("posts").doc(_.id).update({comments:t}),y(""),w&&(C(!1),U())}}}),Object(x.jsx)("button",{onClick:function(){w?(U(),C(!1)):(T.current.style="display:block",C(!0))},className:"emoji-picker-btn",children:Object(x.jsx)(J.a,{})}),Object(x.jsx)("div",{ref:T,style:{display:"none"},className:"emoji-picker-container",children:Object(x.jsx)(Y.a,{onClick:function(e){y(v+e.native)}})})]}),Object(x.jsxs)("button",{onClick:function(){var e=[];if(S)for(var c=0;c<_.likes.length;c++)_.likes[c]!==t.uid&&e.push(_.likes[c]);else e=[].concat(Object(Z.a)(_.likes),[t.uid]);O.collection("posts").doc(_.id).update({likes:e})},className:"home-like-btn-container",children:[S?Object(x.jsx)(X.a,{className:"like-btn"}):Object(x.jsx)(V.a,{className:"like-btn"}),Object(x.jsx)("div",{children:"".concat(e.data.likes.length," ").concat(e.data.likes.length>1?"Likes":"Like")})]}),Object(x.jsx)("div",{className:"actual-comments-container",children:R.map((function(e,t){if(t>=L&&t<=M-1)return Object(x.jsxs)("div",{className:"actual-comment",children:[Object(x.jsxs)("div",{className:"comment-user-info",children:[Object(x.jsx)("div",{className:"comm-user-img",children:e.dp?Object(x.jsx)("img",{src:e.dp,alt:""}):Object(x.jsx)("img",{src:"https://i.stack.imgur.com/l60Hf.png",alt:""})}),Object(x.jsx)("p",{children:e.name})]}),Object(x.jsx)("div",{className:"comment-value",children:Object(x.jsx)("p",{children:e.value})})]},t)}))}),Object(x.jsx)("div",{className:D.root,children:Object(x.jsx)(Q.a,{count:Math.ceil(R.length/4),size:"large",color:"primary",onChange:function(e,t){m(t)}})})]})]})})},te=(c(151),c(196)),ce=c(197),ne=c(123),ae=c.n(ne),se=c(122),ie=c.n(se),oe=c(121),le=c.n(oe),re=function(){var e=Object(w.g)(),t=Object(k.a)({title:{flexGrow:1,height:"5rem",width:"5rem"},addBtn:{position:"fixed",bottom:"20px",right:"20px"},logo:{height:"100%",objectFit:"cover"},logout_logo:{height:"2rem",width:"2rem",borderRadius:"50%"}})();return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(te.a,{color:"white",position:"fixed",children:Object(x.jsxs)(ce.a,{children:[Object(x.jsx)("div",{onClick:function(){e.push("/")},className:t.title,children:Object(x.jsx)("img",{className:t.logo,src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/Instagram_logo.svg/800px-Instagram_logo.svg.png",alt:""})}),Object(x.jsx)(N.a,{onClick:function(){e.push("/")},children:Object(x.jsx)(le.a,{})}),Object(x.jsx)(N.a,{onClick:function(){e.push("/reels")},children:Object(x.jsx)(ie.a,{})}),Object(x.jsx)(N.a,{onClick:function(){e.push("/profile-page")},children:Object(x.jsx)(ae.a,{})}),Object(x.jsx)(N.a,{onClick:function(){b.signOut()},children:Object(x.jsx)("img",{className:t.logout_logo,src:"https://png.pngtree.com/png-clipart/20190520/original/pngtree-vector-logout-icon-png-image_4233257.jpg",alt:""})})]})})})},je=function(){var e,t,c=Object(n.useRef)(null),a=Object(w.g)(),s=Object(n.useContext)(h),i=Object(n.useState)([]),j=Object(r.a)(i,2),d=j[0],u=j[1],b=Object(n.useState)(!1),m=Object(r.a)(b,2),f=m[0],g=m[1];Object(n.useEffect)(Object(l.a)(o.a.mark((function c(){var n;return o.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!s){c.next=9;break}return t=O.collection("users").doc(s.uid),c.next=4,t.get();case 4:return e=c.sent,c.next=7,e.data().name;case 7:c.sent&&a.push("/sign-up2");case 9:n=O.collection("posts").onSnapshot((function(e){for(var t=e.docs,c=[],a=0;a<t.length;a++)c.push(Object(E.a)({id:t[a].id},t[a].data()));return u(c),function(){n()}}));case 10:case"end":return c.stop()}}),c)}))),[]);var v=Object(k.a)({title:{flexGrow:1},addBtn:{position:"fixed",bottom:"20px",right:"20px"}})();return Object(x.jsx)(x.Fragment,{children:s?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(re,{}),Object(x.jsx)(H.a,{onClick:function(){c.current.click()},color:"primary","aria-label":"add",className:v.addBtn,children:Object(x.jsx)(z.a,{})}),Object(x.jsx)("input",{type:"file",id:"file",ref:c,style:{display:"none"},onChange:function(e){var t=e.currentTarget.files[0],c=t.name,n=t.size,a=t.type;if(n/=1e6,"image"===(a=a.split("/")[0]))if(n>15)alert("Can't upload files with size more than 15MB");else{var i=p.ref("/posts/".concat(s.uid,"/").concat(Date.now()+"-"+c)).put(t);i.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;console.log(t+"% done"),g(t>=0&&t<100)}),null,(function(){i.snapshot.ref.getDownloadURL().then((function(e){O.collection("users").doc(s.uid).get().then((function(t){O.collection("posts").add({uid:s.uid,name:t.data().displayName,dp:t.data().photoURL,likes:[],comments:[],url:e,type:a})}))}))}))}else alert("Only Images can be uploaded")}}),f?Object(x.jsx)(I.a,{className:"progress-circle",color:"secondary"}):"",Object(x.jsx)("div",{className:"posts-container",children:d.map((function(e,t){return Object(x.jsx)(ee,{data:e},t)}))})]}):Object(x.jsx)(w.a,{to:"/login"})})},de=c(124),ue=c.n(de),be=Object(k.a)({root:{marginBottom:"15px"},other_login:{margin:"10px"},sign_up_btn:{margin:"10px"},bio:{wordBreak:"break-word"}}),Oe=function(e){var t=be(),c=Object(n.useState)(""),a=Object(r.a)(c,2),s=a[0],i=a[1],j=Object(n.useState)(""),d=Object(r.a)(j,2),u=d[0],b=d[1],m=Object(n.useContext)(h),f=Object(w.g)(),y=Object(n.useRef)(null);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(g.a,{className:"sign-up-box-container",children:Object(x.jsxs)("div",{className:"sign-up-box",children:[Object(x.jsx)("div",{className:"display-img-container",children:Object(x.jsx)("img",{src:"https://images.unsplash.com/photo-1586191582151-f73872dfd183?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxjb2xsZWN0aW9uLXBhZ2V8M3wxNzA4Mjc2fHxlbnwwfHx8fA%3D%3D&w=1000&q=80",alt:""})}),Object(x.jsxs)("form",{color:"primary",children:[Object(x.jsx)(v.a,{className:t.root,id:"name",label:"Name",variant:"outlined",color:"primary",value:s,onChange:function(e){i(e.currentTarget.value)}}),Object(x.jsx)(v.a,{className:t.bio,id:"bio",label:"Bio",variant:"outlined",color:"primary",multiline:!0,value:u,onChange:function(e){b(e.currentTarget.value)}}),Object(x.jsxs)(N.a,{onClick:function(){y.current.click()},className:"profile-pic-upload-container",children:["Upload Profile Picture",Object(x.jsx)(ue.a,{})]}),Object(x.jsx)("input",{style:{display:"none"},type:"file",ref:y,onChange:function(e){var t=e.currentTarget.files[0],c=t.type;if("image"===(c=c.split("/")[0])){var n=p.ref("/dp/".concat(m.uid+"-"+Date.now())).put(t);n.on("state_changed",null,null,(function(){n.snapshot.ref.getDownloadURL().then((function(e){O.collection("users").doc(m.uid).update({photoURL:e})}))}))}else alert("Upload Image Only")}}),Object(x.jsx)(N.a,{onClick:Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.collection("users").doc(m.uid),e.next=3,t.update({displayName:s,bio:u});case 3:setTimeout((function(){f.push("/")}),2500);case 4:case"end":return e.stop()}}),e)}))),className:t.sign_up_btn,variant:"contained",color:"secondary",children:"Sign Up"})]})]})})})},pe=(c(152),c(153),c(102)),me=c.n(pe),xe=function(e){Object(n.useContext)(h);var t=Object(n.useState)(!1),c=Object(r.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(!1),o=Object(r.a)(i,2),l=o[0],j=o[1],d=e.data.comments,u=Object(n.useRef)(null),b=Object(n.useRef)(null);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"profile-post-container",children:[Object(x.jsx)("div",{ref:u,style:{display:"none"},className:"profile-all-comments-cont",children:d.map((function(e,t){return Object(x.jsxs)("div",{className:"actual-comment",children:[Object(x.jsxs)("div",{className:"comment-user-info",children:[Object(x.jsx)("div",{className:"comm-user-img",children:e.dp?Object(x.jsx)("img",{src:e.dp,alt:""}):Object(x.jsx)("img",{src:"https://i.stack.imgur.com/l60Hf.png",alt:""})}),Object(x.jsx)("p",{children:e.name})]}),Object(x.jsx)("div",{className:"comment-value",children:Object(x.jsx)("p",{children:e.value})})]},t)}))}),Object(x.jsx)("div",{ref:b,style:{display:"block"},className:"post-src",children:"image"===e.data.type?Object(x.jsx)("img",{src:e.data.url,alt:""}):Object(x.jsx)("video",{onClick:function(e){a?(s(!1),e.currentTarget.pause()):(s(!0),e.currentTarget.play())},src:e.data.url,alt:""})}),Object(x.jsxs)("div",{className:"post-likes-comm",children:[Object(x.jsxs)("div",{className:"profile-like-container",children:[Object(x.jsx)(X.a,{className:"profile-like-btn"}),Object(x.jsx)("div",{children:"".concat(e.data.likes.length," ").concat(e.data.likes.length>1?"Likes":"Like")})]}),Object(x.jsx)("div",{onClick:function(){l?(j(!1),u.current.style="display:none",b.current.style="display:block"):(u.current.style="display:block",b.current.style="display:none",j(!0))},className:"profile-comment-container",children:Object(x.jsx)(me.a,{className:"profile-comments-btn"})})]})]})})},he=c(125),fe=c.n(he),ge=function(){var e=Object(n.useContext)(h),t=Object(n.useState)(""),c=Object(r.a)(t,2),a=c[0],s=c[1],i=Object(n.useState)(""),o=Object(r.a)(i,2),l=o[0],j=o[1],d=Object(n.useState)([]),u=Object(r.a)(d,2),b=u[0],m=u[1],f=Object(n.useState)([]),g=Object(r.a)(f,2),v=(g[0],g[1]),y=Object(n.useState)(""),k=Object(r.a)(y,2),C=k[0],S=k[1],_=Object(n.useState)(!1),R=Object(r.a)(_,2),D=R[0],L=R[1];Object(n.useEffect)((function(){O.collection("users").doc(e.uid).get().then((function(e){s(e.data().displayName),j(e.data().photoURL),S(e.data().bio)}))}),[]),Object(n.useEffect)((function(){var t=[];O.collection("posts").get().then((function(c){for(var n=c.docs,a=0;a<n.length;a++)n[a].data().uid===e.uid&&t.push(n[a].data());m(t)})),t=[],O.collection("reels").get().then((function(c){for(var n=c.docs,a=0;a<n.length;a++)console.log(n[a].data()),n[a].data().uid===e.uid&&t.push(n[a].data());v(t)}))}),[]),console.log(b);var M=Object(n.useRef)(null),T=Object(n.useRef)(null),U=Object(n.useRef)(null),B=function(){T.current.style="display:none",U.current.style="display:none"};return Object(x.jsx)(x.Fragment,{children:e?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(re,{}),Object(x.jsxs)("div",{className:"profile-container",children:[Object(x.jsx)("div",{className:"profile-user-info",children:Object(x.jsxs)("div",{className:"profile-card",children:[Object(x.jsxs)("div",{onClick:function(){M.current.click()},className:"profile-img",children:[l?Object(x.jsx)("img",{src:l,alt:""}):Object(x.jsx)("img",{src:"https://i.stack.imgur.com/l60Hf.png",alt:""}),Object(x.jsx)("input",{onChange:function(t){var c=t.currentTarget.files[0];console.log(c);var n=c.type;if("image"===(n=n.split("/")[0])){var a=p.ref("/dp/".concat(e.uid+"-"+Date.now())).put(c);a.on("state_changed",null,null,(function(){a.snapshot.ref.getDownloadURL().then((function(t){console.log(t),O.collection("users").doc(e.uid).update({photoURL:t}),O.collection("posts").get().then((function(c){for(var n=c.docs,a=0;a<n.length;a++)n[a].data().uid===e.uid&&n[a].ref.update({dp:t})})),j(t)}))}))}else alert("Upload Image Only")},ref:M,type:"file",style:{display:"block"}})]}),Object(x.jsx)("div",{className:"profile-user-name",children:Object(x.jsx)("h2",{children:a})}),Object(x.jsxs)("div",{className:"profile-user-bio",children:[""===C?Object(x.jsx)("p",{children:"Add to bio.."}):Object(x.jsx)("p",{col:!0,style:{textOverflow:"auto"},children:C}),Object(x.jsx)(N.a,{className:"bio-edit-btn",onClick:function(){D?(L(!1),B()):(L(!0),T.current.style="display:block",U.current.style="display:block")},variant:"contained",color:"primary",children:Object(x.jsx)(fe.a,{})}),Object(x.jsx)("input",{ref:T,type:"text",style:{display:"none"},value:C,onChange:function(e){S(e.currentTarget.value)}}),Object(x.jsx)(N.a,{onClick:function(){B(),O.collection("users").doc(e.uid).get().then((function(e){e.ref.update({bio:C})}))},style:{display:"none"},ref:U,children:"Save"})]})]})}),Object(x.jsxs)("div",{className:"profile-user-posts",children:[Object(x.jsxs)("h1",{children:["My Posts : ",b.length]}),Object(x.jsx)("div",{className:"profile-posts-carousel",children:b.map((function(e,t){return Object(x.jsx)(xe,{data:e},t)}))})]})]})]}):Object(x.jsx)(w.a,{to:"/login"})})},ve=(c(154),c(126)),ye=c.n(ve),Ne=(c(155),function(e){var t=Object(n.useContext)(h),c=Object(n.useState)(!0),a=Object(r.a)(c,2),s=a[0],i=a[1],o=Object(n.useState)(!1),l=Object(r.a)(o,2),j=l[0],d=l[1],u=Object(n.useState)(""),b=Object(r.a)(u,2),p=b[0],m=b[1],f=Object(n.useState)(""),g=Object(r.a)(f,2),v=g[0],y=g[1],N=Object(n.useState)(""),k=Object(r.a)(N,2),w=k[0],C=k[1],S=Object(n.useState)(!1),_=Object(r.a)(S,2),R=_[0],D=_[1];Object(n.useEffect)((function(){O.collection("users").doc(t.uid).get().then((function(e){y(e.data().displayName),C(e.data().photoURL)}))}),[]);var L=e.data.likes.includes(t.uid),M=e.data.comments,T=Object(n.useRef)(null),U=Object(n.useRef)(null),B={root:null,rootMargin:"0px",threshold:[.25,.5,.75,1]};Object(n.useEffect)((function(){new IntersectionObserver((function(e){e[0].intersectionRatio>=.5?U.current&&U.current.play():U.current&&U.current.pause()}),B).observe(U.current)}),[]);var F=Object(n.useRef)(null);return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"video-container",children:[Object(x.jsxs)("div",{className:"video-src",children:[Object(x.jsx)("p",{className:"reels-user-name",children:e.data.name}),Object(x.jsxs)("span",{className:"song-details",children:[Object(x.jsx)(ye.a,{}),Object(x.jsx)("marquee",{children:"Song Name"})]}),Object(x.jsx)("video",{onClick:function(e){s?(i(!1),e.currentTarget.pause()):(i(!0),e.currentTarget.play())},src:e.data.url,ref:U,loop:!0,autoPlay:!0}),Object(x.jsx)("div",{onClick:function(){var c=[];if(L)for(var n=0;n<e.data.likes.length;n++)e.data.likes[n]!==t.uid&&c.push(e.data.likes[n]);else c=[].concat(Object(Z.a)(e.data.likes),[t.uid]);O.collection("reels").doc(e.data.id).update({likes:c})},className:"like-btn-container",children:L?Object(x.jsx)(X.a,{className:"reels-like-btn"}):Object(x.jsx)(V.a,{className:"reels-like-btn"})}),Object(x.jsx)("div",{className:"num-likes",children:Object(x.jsx)("p",{children:"".concat(e.data.likes.length," ").concat(e.data.likes.length>1?"Likes":"Like")})}),Object(x.jsx)("div",{onClick:function(){j?(d(!1),T.current.style="display:none"):(d(!0),T.current.style="display:block")},className:"comment-btn-container",children:Object(x.jsx)(me.a,{className:"reels-comments-btn"})})]}),Object(x.jsxs)("div",{ref:T,style:{display:"none",border:"1px solid"},className:"reels-comments-container",children:[Object(x.jsxs)("div",{className:"reels-add-comment",children:[Object(x.jsx)("input",{onChange:function(e){m(e.currentTarget.value)},value:p,placeholder:"Comment...",onKeyDown:function(t){if("Enter"===t.key){var c=[].concat(Object(Z.a)(e.data.comments),[{name:v,dp:w,value:p}]);O.collection("reels").doc(e.data.id).update({comments:c}),m("")}}}),Object(x.jsx)("button",{onClick:function(){R?(F.current.style="display:none",D(!1)):(F.current.style="display:block",D(!0))},className:"reel-emoji-picker-btn",children:Object(x.jsx)(J.a,{})}),Object(x.jsx)("div",{ref:F,style:{display:"none"},className:"reel-emoji-picker-container",children:Object(x.jsx)(Y.a,{onClick:function(e){m(p+e.native)},sheetSize:16,perLine:9})})]}),Object(x.jsx)("div",{className:"reel-all-comments",children:M.map((function(e,t){return Object(x.jsxs)("div",{className:"actual-comment",children:[Object(x.jsxs)("div",{className:"comment-user-info",children:[Object(x.jsx)("div",{className:"comm-user-img",children:e.dp?Object(x.jsx)("img",{src:e.dp,alt:""}):Object(x.jsx)("img",{src:"https://i.stack.imgur.com/l60Hf.png",alt:""})}),Object(x.jsx)("p",{children:e.name})]}),Object(x.jsx)("div",{className:"comment-value",children:Object(x.jsx)("p",{children:e.value})})]},t)}))})]})]})})}),ke=function(){var e=Object(n.useRef)(null),t=Object(n.useContext)(h),c=Object(n.useState)([]),a=Object(r.a)(c,2),s=a[0],i=a[1],o=Object(n.useState)(!1),l=Object(r.a)(o,2),j=l[0],d=l[1],u=Object(n.useRef)(null);Object(n.useEffect)((function(){var e=O.collection("reels").onSnapshot((function(t){for(var c=t.docs,n=[],a=0;a<c.length;a++)n.push(Object(E.a)({id:c[a].id},c[a].data()));return i(n),function(){e()}}))}),[]);var b=Object(k.a)({title:{flexGrow:1},addBtn:{position:"fixed",bottom:"20px",right:"20px"}})();return Object(x.jsx)(x.Fragment,{children:t?Object(x.jsxs)(x.Fragment,{children:[j?Object(x.jsx)("div",{className:"reels-progress-circle-container",children:Object(x.jsx)(I.a,{color:"primary"})}):"",Object(x.jsx)("div",{className:"navbar-container",children:Object(x.jsx)(re,{})}),Object(x.jsx)("div",{ref:u,className:"all-video-container",children:s.map((function(e,t){return Object(x.jsx)(Ne,{data:e},t)}))}),Object(x.jsx)(H.a,{onClick:function(){e.current.click()},color:"primary","aria-label":"add",className:b.addBtn,children:Object(x.jsx)(z.a,{})}),Object(x.jsx)("input",{type:"file",id:"file",ref:e,style:{display:"none"},onChange:function(e){var c=e.currentTarget.files[0],n=c.name,a=c.size,s=c.type;if(a/=1e6,"video"===(s=s.split("/")[0]))if(a>40)alert("Can't upload files with size more than 40MB");else{var i=p.ref("/reels/".concat(t.uid,"/").concat(Date.now()+"-"+n)).put(c);i.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;console.log(t+"% done"),t>=0&&t<100?(d(!0),u.current.style="filter:blur(8px)"):(d(!1),u.current.style="filter:blur(0px)")}),null,(function(){i.snapshot.ref.getDownloadURL().then((function(e){O.collection("users").doc(t.uid).get().then((function(c){O.collection("reels").add({uid:t.uid,name:c.data().displayName,dp:c.data().photoURL,likes:[],comments:[],url:e,type:s})}))}))}))}else alert("Only Videos can be uploaded")}})]}):Object(x.jsx)(w.a,{to:"/login"})})},we=function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(f,{children:Object(x.jsx)(W.a,{children:Object(x.jsxs)(w.d,{children:[Object(x.jsx)(w.b,{exact:!0,path:"/reels",children:Object(x.jsx)(ke,{})}),Object(x.jsx)(w.b,{exact:!0,path:"/profile-page",children:Object(x.jsx)(ge,{})}),Object(x.jsx)(w.b,{exact:!0,path:"/sign-up1",children:Object(x.jsx)(A,{})}),Object(x.jsx)(w.b,{exact:!0,path:"/sign-up2",children:Object(x.jsx)(Oe,{})}),Object(x.jsx)(w.b,{exact:!0,path:"/login",children:Object(x.jsx)(B,{})}),Object(x.jsx)(w.b,{exact:!0,path:"/",children:Object(x.jsx)(je,{})})]})})})})};s.a.render(Object(x.jsx)(we,{}),document.getElementById("root"))}},[[156,1,2]]]);
//# sourceMappingURL=main.51280ff1.chunk.js.map